(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{459:function(e,t,l){"use strict";l.r(t);var o={layout:"layout",head:function(){return{title:"系统参数设置"}},data:function(){return{key:"",form:{webinfoTitle:"",webinfoUrl:"",webinfoUploadUrl:"",uploadLevel:"0",pexelsKey:"",silenceTime:"",interceptTime:"",postMax:"",forumAudit:!1,spaceAudit:!1,isLogin:!1}}},beforeDestroy:function(){},created:function(){},mounted:function(){var e=this;localStorage.getItem("webkey")?e.key=localStorage.getItem("webkey"):(e.$message({message:"认证失效！",type:"error"}),e.$router.push({path:"/"})),e.getConfig()},methods:{save:function(){var e=this,t=e.form;e.form.forumAudit,t.forumAudit,e.form.spaceAudit,t.spaceAudit,e.form.isLogin,t.isLogin;var l=this.$loading({lock:!0,text:"Loading",spinner:"el-icon-loading",background:"rgba(0, 0, 0, 0.7)"}),data={webkey:e.key,params:JSON.stringify(t)};e.$axios.$post(e.$api.apiConfigUpdate(),this.qs.stringify(data)).then((function(t){l.close(),1==t.code?(e.$message({message:t.msg,type:"success"}),e.getConfig()):e.$message({message:t.msg,type:"error"})})).catch((function(t){l.close(),console.log(t),e.$message({message:"接口请求异常，请检查网络！",type:"error"})}))},getConfig:function(){var e=this,data={webkey:e.key};e.$axios.$post(e.$api.getApiConfig(),this.qs.stringify(data)).then((function(t){1==t.code&&(e.form.webinfoTitle=t.data.webinfoTitle,e.form.webinfoUrl=t.data.webinfoUrl,e.form.webinfoUploadUrl=t.data.webinfoUploadUrl,e.form.silenceTime=t.data.silenceTime,e.form.interceptTime=t.data.interceptTime,e.form.pexelsKey=t.data.pexelsKey,t.data.uploadLevel&&(e.form.uploadLevel=t.data.uploadLevel+""),e.form.postMax=t.data.postMax,1==t.data.forumAudit?e.form.forumAudit=!0:e.form.forumAudit=!1,1==t.data.spaceAudit?e.form.spaceAudit=!0:e.form.spaceAudit=!1,1==t.data.isLogin?e.form.isLogin=!0:e.form.isLogin=!1)})).catch((function(t){console.log(t),e.$message({message:"接口请求异常，请检查网络！",type:"error"})}))}}},r=l(26),component=Object(r.a)(o,(function(){var e=this,t=e._self._c;return t("div",{staticClass:"page-container"},[t("el-row",{attrs:{gutter:15}},[t("el-col",{attrs:{span:24}},[t("div",{staticClass:"data-box"},[t("div",{staticClass:"page-title"},[t("h4",[e._v("系统参数设置")]),e._v(" "),t("p",[e._v("在这里设置系统基本信息和功能开关")])]),e._v(" "),t("div",{staticClass:"page-form"},[t("el-form",{ref:"form",attrs:{model:e.form,"label-position":"top","label-width":"80px"}},[t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("网站名称"),t("span",[e._v("用于邮件发送等显示名称")])]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入网站名称"},model:{value:e.form.webinfoTitle,callback:function(t){e.$set(e.form,"webinfoTitle",t)},expression:"form.webinfoTitle"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("网站地址"),t("span",[e._v("用于邮件发送等显示地址，为WEB访问地址（非RuleApi）")])]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入网站地址"},model:{value:e.form.webinfoUrl,callback:function(t){e.$set(e.form,"webinfoUrl",t)},expression:"form.webinfoUrl"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("每日最大发布数量"),t("span",[e._v("针对文章，动态，帖子等")])]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入每日最大发布数量"},model:{value:e.form.postMax,callback:function(t){e.$set(e.form,"postMax",t)},expression:"form.postMax"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("是否开启登录可见"),t("span",{staticClass:"text-gray"},[e._v("开启后，文章内容，动态内容，帖子内容将变为强制登录可见")])]),e._v(" "),t("el-switch",{model:{value:e.form.isLogin,callback:function(t){e.$set(e.form,"isLogin",t)},expression:"form.isLogin"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("是否开启动态审核"),t("span",{staticClass:"text-gray"},[e._v("开启后，发布动态将需要审核")])]),e._v(" "),t("el-switch",{model:{value:e.form.spaceAudit,callback:function(t){e.$set(e.form,"spaceAudit",t)},expression:"form.spaceAudit"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("是否开启帖子审核"),t("span",{staticClass:"text-gray"},[e._v("开启后，发布帖子将需要审核，仅Pro版生效")])]),e._v(" "),t("el-switch",{model:{value:e.form.forumAudit,callback:function(t){e.$set(e.form,"forumAudit",t)},expression:"form.forumAudit"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("疑似攻击自动封禁时间"),t("span",[e._v("单位秒，当用户疑似进行攻击行为时，进行封禁")])]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入时间(s)"},model:{value:e.form.silenceTime,callback:function(t){e.$set(e.form,"silenceTime",t)},expression:"form.silenceTime"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("多次触发违规自动封禁时间"),t("span",[e._v("单位秒，当用户疑多次触发违规词时，进行封禁")])]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入时间(s)"},model:{value:e.form.interceptTime,callback:function(t){e.$set(e.form,"interceptTime",t)},expression:"form.interceptTime"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("本地&ftp图片访问地址"),t("span",[e._v("本地上传接口或者FTP上传接口的访问地址")])]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入本地图片访问地址"},model:{value:e.form.webinfoUploadUrl,callback:function(t){e.$set(e.form,"webinfoUploadUrl",t)},expression:"form.webinfoUploadUrl"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("pexelsKey"),t("span",[e._v("pexel是一个在线图库，可以获取免费无版权风险的高清图片，"),t("a",{attrs:{href:"https://www.pexels.com/zh-cn/api/",target:"_blank"}},[e._v("点击此处申请")])])]),e._v(" "),t("el-input",{attrs:{placeholder:"请输入pexelsKey"},model:{value:e.form.pexelsKey,callback:function(t){e.$set(e.form,"pexelsKey",t)},expression:"form.pexelsKey"}})],1),e._v(" "),t("el-form-item",[t("p",{staticClass:"form-label",attrs:{slot:"label"},slot:"label"},[e._v("文件上传限制")]),e._v(" "),t("el-select",{attrs:{placeholder:"请选择评论审核等级"},model:{value:e.form.uploadLevel,callback:function(t){e.$set(e.form,"uploadLevel",t)},expression:"form.uploadLevel"}},[t("el-option",{attrs:{label:"关闭文件上传",value:"1"}}),e._v(" "),t("el-option",{attrs:{label:"图片上传",value:"0"}}),e._v(" "),t("el-option",{attrs:{label:"图片和视频上传",value:"2"}}),e._v(" "),t("el-option",{attrs:{label:"不限制类型",value:"3"}})],1)],1),e._v(" "),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.save()}}},[e._v("保存设置")])],1)],1)],1)])])],1)],1)}),[],!1,null,null,null);t.default=component.exports}}]);